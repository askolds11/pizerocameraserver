@page "/status"
@using picamerasserver.Components.Components
@using picamerasserver.Components.Components.StatusTable

<PageTitle>Status - PiCam</PageTitle>
<DefaultPage>
    <MudStack>
        <MudExpansionPanels Elevation="5" MultiExpansion>
            <MudExpansionPanel Expanded Gutters="false" Dense="true">
                <TitleContent>
                    <MudText Typo="Typo.h5">Ping</MudText>
                </TitleContent>
                <ChildContent>
                    <StatusTable ColorTransform="@ColorTransform" TooltipTransform="@TooltipTransform"></StatusTable>
                    <IndicatorStatus TooltipTransform="null"
                                     ColorTransform="@ColorTransformIndicator"/>
                    <MudStack Row="true" Spacing="4" Class="pa-4">
                        <MudButton Variant="Variant.Filled" Color="Color.Primary"
                                   OnClick="@Ping" Disabled="PingActive">
                            Ping
                        </MudButton>
                        <MudButton Variant="Variant.Filled" Color="Color.Secondary"
                                   OnClick="@StopPing" Disabled="!PingActive">
                            Stop
                        </MudButton>
                    </MudStack>
                </ChildContent>
            </MudExpansionPanel>
            <MudExpansionPanel Expanded Gutters="false" Dense="true">
                <TitleContent>
                    <MudText Typo="Typo.h5">Status</MudText>
                </TitleContent>
                <ChildContent>
                    <StatusTable ColorTransform="@ColorTransformStatus"
                                 TooltipTransform="@TooltipTransform"></StatusTable>
                    <IndicatorStatus TooltipTransform="null"
                                     ColorTransform="@ColorTransformIndicatorStatus"/>
                    <MudStack Row="true" Spacing="4" Class="pa-4">
                        <MudButton Variant="Variant.Filled" Color="Color.Primary"
                                   OnClick="@GetStatus" Disabled="PingActive">
                            Get status
                        </MudButton>
                    </MudStack>
                </ChildContent>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </MudStack>
</DefaultPage>

@code {

    private Func<string, RenderFragment?> TooltipTransform => _ => null;
}